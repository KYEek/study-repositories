package jdbc.day04.board.controller;

import java.util.Scanner;

import jdbc.day04.board.domain.BoardDTO;
import jdbc.day04.member.domain.MemberDTO;
import jdbc.day04.boardDAO.*;

public class BoardController {
	
	
	
	//field
	BoardDAO bdao = new BoardDAO_imple();
	
	
	
	//method
	//			ê²Œì‹œíŒ ë©”ë‰´	ë¥¼ ë³´ì—¬ì£¼ëŠ” ë©”ì†Œë“œ		//
	public void menu_Board(MemberDTO member, Scanner sc) {
		
		String add_menu = "admin".equals(member.getUserid())?"7.ìµœê·¼1ì£¼ì¼ê°„ ì¼ìë³„ ê²Œì‹œê¸€ ì‘ì„±ê±´ìˆ˜ \n8.ì´ë²ˆë‹¬ ì¼ìë³„ ê²Œì‹œê¸€ ì‘ì„±ê±´ìˆ˜   9.ë‚˜ê°€ê¸°\n":"7.ë‚˜ê°€ê¸° \n";
		
		System.out.println("\n--------------ê²Œì‹œíŒ ë©”ë‰´ [" + member.getName() + "ë‹˜ ë¡œê·¸ì¸ì¤‘..]------------------\n"
						+ "1.ê¸€ëª©ë¡ë³´ê¸°   2.ê¸€ë‚´ìš©ë³´ê¸°   3.ê¸€ì“°ê¸°   4.ëŒ“ê¸€ì“°ê¸° \n"
						+ "5.ê¸€ìˆ˜ì •í•˜ê¸°   6.ê¸€ì‚­ì œí•˜ê¸°   " + add_menu);
		
		System.out.print("ğŸ¤šë©”ë‰´ë²ˆí˜¸ ì„ íƒ : ");
		String s_menuNo = sc.nextLine();
		
		switch (s_menuNo) {
		case "1":	//ê¸€ëª©ë¡ë³´ê¸°
			//boardList();
			break;
		case "2":	//ê¸€ë‚´ìš©ë³´ê¸°
			//viewContents(member.getUserid(), sc);
			break;
		case "3":	//ê¸€ì“°ê¸°
			int n = write(member, sc);
			if(n==1)
				System.out.println(">> ê¸€ì“°ê¸° ì„±ê³µ!! <<");
			else if(n==0)
				System.out.println(">> ê¸€ì“°ê¸° ì·¨ì†Œ!! <<");
			else if(n== -1)
				System.out.println(">> ê¸€ì“°ê¸° ì‹¤íŒ¨!! <<");
			
			break;
		case "4":	//ëŒ“ê¸€ì“°ê¸°
			
			break;
		case "5":	//ê¸€ìˆ˜ì •í•˜ê¸°

			break;
		case "6":	//ê¸€ì‚­ì œí•˜ê¸°

			break;
		case "7":	//ê´€ë¦¬ì(ìµœê·¼1ì£¼ì¼ê°„ ì¼ìë³„ ê²Œì‹œê¸€ ì‘ì„±ê±´ìˆ˜) ìœ ì €(ë‚˜ê°€ê¸°)

			break;
		case "8":	//ê´€ë¦¬ì ì¼ ë•Œ ì´ë²ˆë‹¬ ì¼ìë³„ ê²Œì‹œê¸€ ì‘ì„±ê±´ìˆ˜

			break;
		case "9":	//admin ì¼ë•Œ ë‚˜ê°€ê¸°

			break;
		default:
			System.out.println(">> ë©”ë‰´ì— ì—†ëŠ” ë²ˆí˜¸ ì…ë‹ˆë‹¤. <<");
			
			break;
		}// end of switch --------------------------------------
		
	}

	
	// *** ê¸€ì“°ê¸°ë¥¼ í•´ì£¼ëŠ” ë©”ì†Œë“œ *** //
	// === Transaction ì²˜ë¦¬ ===
	//    (tbl_board í…Œì´ë¸”ì— insert ê°€ ì„±ê³µë˜ì–´ì§€ë©´ tbl_member í…Œì´ë¸”ì˜ point ì»¬ëŸ¼ì— 10ì”© ì¦ê°€ update ë¥¼ í•  ê²ƒì´ë‹¤.
	//     ê·¸ëŸ°ë° insert ë˜ëŠ” update ê°€ í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ëª¨ë‘ rollback í•  ê²ƒì´ê³ ,
	//     insert ì™€ update ê°€ ëª¨ë‘ ì„±ê³µí•´ì•¼ë§Œ commit í•  ê²ƒì´ë‹¤.)
	private int write(MemberDTO member, Scanner sc) {
		
		int result = 0;
	
		System.out.print("âŒ‚âŒ‚âŒ‚âŒ‚âŒ‚ê¸€ì“°ê¸°âŒ‚âŒ‚âŒ‚âŒ‚âŒ‚");
		
		System.out.println("1. ì‘ì„±ìëª… : " + member.getName());
		
		System.out.println("2. ê¸€ì œëª© [ìµœëŒ€ 100ê¸€ì] : " + member.getName());
		String subject = sc.nextLine();
		
		System.out.println("3. ê¸€ë‚´ìš© [ìµœëŒ€ 200ê¸€ì] : " + member.getName());
		String contents = sc.nextLine();
		
		System.out.println("4. ê¸€ì•”í˜¸ [ìµœëŒ€ 20ê¸€ì] : " + member.getName());
		String boardpasswd = sc.nextLine();
		
		
		BoardDTO bdto = new BoardDTO();
		bdto.setFk_userid(member.getName());
		bdto.setSubject(subject);
		bdto.setContents(contents);
		bdto.setBoardpasswd(boardpasswd);
		
		do {
			System.out.print(" ì •ë§ë¡œ ê¸€ì“°ê¸°ë¥¼ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?[Y/N] => ");
			String yn = sc.nextLine();
			
			if("y".equalsIgnoreCase(yn)) {
				int subject_length = subject.length();
				int contents_length = contents.length();
				int boardpasswd_length = boardpasswd.length();
				
				if((1<=subject_length && subject_length <=100) && (1<=contents_length && contents_length <=200) && (1<=boardpasswd_length && boardpasswd_length <=20))
				{
					
				}
				else {
					System.out.println(">> ì…ë ¥í•œ ë°ì´í„°ê°€ ë„ˆë¬´ í¬ë¯€ë¡œ ì…ë ¥ì´ ë¶ˆê°€í•©ë‹ˆë‹¤. <<");
				}
				
				break;
			}
			else if("n".equalsIgnoreCase(yn)) {
				break;
			}
			else {
				System.out.println("Y ë˜ëŠ” N ë§Œ ì…ë ¥í•˜ì„¸ìš”!! å–å–å–");
			}
		} while (true);
		return result;
	}
	
	
	
	
}
