package jdbc.day03;

import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

public class MemberCtrl {

	// field, arrtibute, property, ì†ì„±
	
	//method, operation, ê¸°ëŠ¥
	MemberDAO mdao = new MemberDAO_imple();
	
	//		ì‹œì‘ ë©”ë‰´ë¥¼ ë³´ì—¬ì£¼ëŠ” ë©”ì†Œë“œ(ê¸°ëŠ¥)			//
	public void menu_Start(Scanner sc) {
		
		
		// ë¡œê·¸ì¸ í•˜ê¸°ì „
		
		
		String s_Choice = "";
		boolean isSuccess_Login = false;
		
		do {
			System.out.println("\nâ™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™ì‹œì‘ë©”ë‰´â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™ \n"
							+ "1. íšŒì›ê°€ì…  2. ë¡œê·¸ì¸  3. í”„ë¡œê·¸ë¨ ì¢…ë£Œ \n"
							+ "â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™â™");
			
			System.out.print("ë©”ë‰´ë²ˆí˜¸ ì„ íƒ : ");
			s_Choice = sc.nextLine();

			switch (s_Choice) {
			case "1": // íšŒì›ê°€ì…
				memberRegister(sc);
				break;
			case "2": // ë¡œê·¸ì¸
				MemberDTO member = login(sc);
				if(member != null)
					isSuccess_Login = true;
				break;
			case "3": // í”„ë¡œê·¸ë¨ ì¢…ë£Œ

				return;	//menu_Start(Scanner sc) ì´ ë©”ì„œë“œë¥¼ ì¢…ë£Œí•¨
			default:
				System.out.println("ğŸ˜£ ë©”ë‰´ì— ì—†ëŠ” ë²ˆí˜¸ ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì„ íƒí•˜ì„¸ìš”!!");
				break;
			}
		} while (!("2".equals(s_Choice)) && isSuccess_Login);		
		
		
		
		
		// ë¡œê·¸ì¸ í•œ í›„
		System.out.println("ì„ì‹œë¡œ ì—¬ê¸°ëŠ” ë¡œê·¸ì¸ ëœ í™”ë©´ì…ë‹ˆë‹¤ggggg.");
		
		
		
		
	}
	
	
	
	//		íšŒì›ê°€ì…ì„ í•´ì£¼ëŠ” ë©”ì†Œë“œ 		//
	private void memberRegister(Scanner sc) {
		
		System.out.println("\n ğŸ˜Š íšŒì›ê°€ì… ğŸ˜Š");
		System.out.print("1. ì•„ì´ë”” : ");
		String userid = sc.nextLine();
		
		System.out.print("2. ë¹„ë°€ë²ˆí˜¸ : ");
		String passwd = sc.nextLine();
		
		System.out.print("3. íšŒì›ëª… : ");
		String name = sc.nextLine();
		
		System.out.print("4. ì—°ë½ì²˜(íœ´ëŒ€í°) : ");
		String mobile = sc.nextLine();
		
		MemberDTO member = new MemberDTO();
		member.setUserid(userid);
		member.setPasswd(passwd);
		member.setName(name);
		member.setMobile(mobile);
		
		int n = mdao.memberRegister(member);

		if(n==1) {
			System.out.println("\níšŒì›ê°€ì…ì„ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤. (((o(*ï¾Ÿâ–½ï¾Ÿ*)o)))\n");
		}
		else {
			System.out.println("\nğŸ˜­íšŒì›ê°€ì…ì´ ì‹¤íŒ¨ë˜ì—ˆìŠµë‹ˆë‹¤.");
		}
		
		
	}//------------------------end of memberRegister()


	//	ë¡œê·¸ì¸ ì‹œë„í•˜ê¸°		//
	private MemberDTO login(Scanner sc) {
	
		System.out.println("\n â€”â€”â€”â€”â€”â€”â€”â€”â€”ë¡œê·¸ì¸â€”â€”â€”â€”â€”â€”â€”â€”â€”");
		
		System.out.print("ğŸ«µ ì•„ì´ë”” : ");
		String userid = sc.nextLine();
		System.out.print("ğŸ«µ ë¹„ë°€ë²ˆí˜¸ : ");
		String passwd = sc.nextLine();
		
		Map<String, String> paraMap = new HashMap<>();
		paraMap.put("userid", userid);
		paraMap.put("passwd", passwd);
		
		MemberDTO member = mdao.login(paraMap);
		
		if(member != null ) {
			System.out.println("ë¡œê·¸ì¸ ì„±ê³µğŸ‘");
		}
		else {
			System.out.println("ë¡œê·¸ì¸ ì‹¤íŒ¨ğŸ˜­");
		}
		
		
		
		return member;
	}
	
	



}


