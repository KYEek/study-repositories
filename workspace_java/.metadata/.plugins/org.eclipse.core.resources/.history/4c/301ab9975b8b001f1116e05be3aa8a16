package jdbc.day03;

import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

public class MemberCtrl {

	// field, arrtibute, property, 속성
	
	//method, operation, 기능
	MemberDAO mdao = new MemberDAO_imple();
	
	//		시작 메뉴를 보여주는 메소드(기능)			//
	public void menu_Start(Scanner sc) {
		
		
		// 로그인 하기전
		
		
		String s_Choice = "";
		boolean isSuccess_Login = false;
		
		do {
			System.out.println("\n⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙시작메뉴⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙ \n"
							+ "1. 회원가입  2. 로그인  3. 프로그램 종료 \n"
							+ "⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙⁙");
			
			System.out.print("메뉴번호 선택 : ");
			s_Choice = sc.nextLine();

			switch (s_Choice) {
			case "1": // 회원가입
				memberRegister(sc);
				break;
			case "2": // 로그인
				MemberDTO member = login(sc);
				if(member != null)
					isSuccess_Login = true;
				break;
			case "3": // 프로그램 종료

				return;	//menu_Start(Scanner sc) 이 메서드를 종료함
			default:
				System.out.println("😣 메뉴에 없는 번호 입니다. 다시 선택하세요!!");
				break;
			}
		} while (!("2".equals(s_Choice)) && isSuccess_Login);		
		
		
		
		
		// 로그인 한 후
		System.out.println("임시로 여기는 로그인 된 화면입니다ggggg.");
		
		
		
		
	}
	
	
	
	//		회원가입을 해주는 메소드 		//
	private void memberRegister(Scanner sc) {
		
		System.out.println("\n 😊 회원가입 😊");
		System.out.print("1. 아이디 : ");
		String userid = sc.nextLine();
		
		System.out.print("2. 비밀번호 : ");
		String passwd = sc.nextLine();
		
		System.out.print("3. 회원명 : ");
		String name = sc.nextLine();
		
		System.out.print("4. 연락처(휴대폰) : ");
		String mobile = sc.nextLine();
		
		MemberDTO member = new MemberDTO();
		member.setUserid(userid);
		member.setPasswd(passwd);
		member.setName(name);
		member.setMobile(mobile);
		
		int n = mdao.memberRegister(member);

		if(n==1) {
			System.out.println("\n회원가입을 축하드립니다. (((o(*ﾟ▽ﾟ*)o)))\n");
		}
		else {
			System.out.println("\n😭회원가입이 실패되었습니다.");
		}
		
		
	}//------------------------end of memberRegister()


	//	로그인 시도하기		//
	private MemberDTO login(Scanner sc) {
	
		System.out.println("\n —————————로그인—————————");
		
		System.out.print("🫵 아이디 : ");
		String userid = sc.nextLine();
		System.out.print("🫵 비밀번호 : ");
		String passwd = sc.nextLine();
		
		Map<String, String> paraMap = new HashMap<>();
		paraMap.put("userid", userid);
		paraMap.put("passwd", passwd);
		
		MemberDTO member = mdao.login(paraMap);
		
		if(member != null ) {
			System.out.println("로그인 성공👍");
		}
		else {
			System.out.println("로그인 실패😭");
		}
		
		
		
		return member;
	}
	
	



}


