package jdbc.day01;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.Scanner;

public class DML_update_PreparedStatement_04 {

	public static void main(String[] args) {
		
		
		
		Connection conn = null;
		// Connection conn 은 데이터베이스 서버와 연결을 맺어주는 자바의 객체이다.
		
		PreparedStatement pstmt = null;
		//PreparedStatement pstmt 은 Connection conn(연결해서 사용할 DB 서버)에 전송할 SQL문(편지)을 전송(전달)을 해주는 객체(우편배달부)이다.
		
		ResultSet rs = null;
		//ResultSet rs은 select 되어진 결과물이 저장되어지는 곳.
		
		Scanner sc = new Scanner(System.in);
		try {
		
		// >>> 1. 오라클 드라이버 로딩 <<<
				/*
			        === OracleDriver(오라클 드라이버)의 역할 ===
			        1). OracleDriver 를 메모리에 로딩시켜준다.
			        2). OracleDriver 객체를 생성해준다.
			        3). OracleDriver 객체를 DriverManager에 등록시켜준다.
			            --> DriverManager 는 여러 드라이버들을 Vector 에 저장하여 관리해주는 클래스이다.
				*/
					Class.forName("oracle.jdbc.driver.OracleDriver");
					
					
					// >>> 2. 어떤 오라클 서버에 연결을 할래? <<<
					
					System.out.print(" 🫵연결할 오라클 서버의 IP 주소 : ");
					String ip = sc.nextLine(); // 127.0.0.1 //192.168.0.188 /191

					conn = DriverManager.getConnection("jdbc:oracle:thin:@" + ip + ":1521:xe", "JDBC_USER", "gclass");
		}
		
		
		catch (ClassNotFoundException e) {
			System.out.println(">>> ojdbc8.jar 파일이 없습니다. <<<");
		} catch(SQLException e) {
			e.printStackTrace();
		} finally {
			try {
				if(rs != null) {
					rs.close();
					rs = null;
				}
				
				if(pstmt != null) {
					pstmt.close();
					pstmt = null;
				}
				
				if(conn != null) {
					conn.close();
					conn = null;
				}
				
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}
		
		sc.close();
		System.out.println("프로그램 종료😘");
	}// end of main-------------------------------------------

}
